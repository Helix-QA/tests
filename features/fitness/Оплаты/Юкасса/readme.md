# Оплаты через Юкассу

Проверка передачи данных по способам расчета, ставкам НДС и системы налогооблажения в Юкассу

## Описание работы автотеста Юкассы - Проверка способов расчета

Для проверки реализованы следующие фичи: Export_Юкасса, 01.Проверка способов расчета, 02.Проверка ставок НДС, 03_Проверка_СНОСистема_налогооблажения.

- **`Сценарий: 01.`** Проверка payment_mode - 1(Предоплата полная) "full_prepayment"
В списке организаций находит заданную сценарием и в нем устанавливается флаг "Авансовая схема пробития услуг" > Создаются: Клиент, Номенклатура > Создается продажа и к ней создается ссылка на оплату в Юкассу > После создания продажи и ссылки открывается регистр СтатусыОплатыЗаказов и в нем проверяется json запрос который мы отправим в Юкассу.

- **`Сценарий: 02.`** Проверка payment_mode - 2(Аванс - взнос на лицевой счет) "advance"
Открывается рецепция и в ней находим созданного клиента и ему делаем с рецепции взнос на лицевой счет с помощью Юкассы > После взноса заходим в регистр и проверяем json.

- **`Сценарий: 03.`** Проверка payment_mode - 3(Полный расчет) "full_payment"
В организации отключаем настройку Авансовой схемы пробития услуг > Создается продажа с формированием ссылки на оплату в Юкасу > Проверяется json по шаблону.

- **`Сценарий: 04.`** Проверка payment_mode - 4(Оплата кредита) "credit_payment"
Создается продажа, оплачивается наличными на половину суммы, потом открывается список продаж и в нем открывается последняя созданная и оплачивает в этот раз уже через юкассу, после создания ссылки на оплату задолженности проверяется json по шаблону.

## Описание работы автотеста Юкассы -Проверка ставок НДС

- **`Сценарий:`** Настройка перед тестом
Удаляются все переменные и ставки НДС из справочника НДС, Создается тестовая ставка НДС для проверки ее передачи в сервис Юкассы.

- **`Сценарий: 01.`** Проверка vat_code - 1(Без НДС)
Открывается организация и в ней указываем для всех предметов налогооблажения ставку НДС - Без НДС > После создает клиента, номенклатуру и продажу с ссылкой на оплату > Проверяется json по заданному шаблону.

- **`Сценарий: 02.`** Проверка vat_code - 2(0%)
Открывается организация и в ней меняется ставка НДС на созданную > Создается продажа > Проверяется json по шаблону.

- **`Сценарий: 05.`** Проверка vat_code - 3(10%)
По навигационой ссылке открывается созданная ставка НДС и в ней выставляется ставка в 10% > Создается продажа > Проверяется json по шаблону.

- **`Сценарий: 06.`** Проверка vat_code - 1(18%)
По навигационой ссылке открывается созданная ставка НДС и в ней выставляется ставка в 18% > Создается продажа > Проверяется json по шаблону.

- **`Сценарий: 07.`** Проверка vat_code - 4(20%)
По навигационой ссылке открывается созданная ставка НДС и в ней выставляется ставка в 20% > Создается продажа > Проверяется json по шаблону.

- **`Сценарий: 08.`** Проверка vat_code - 5(10%/110%)
По навигационой ссылке открывается созданная ставка НДС и в ней выставляется ставка в 10% и включается тумблер Расчетная > Создается продажа > Проверяется json по шаблону.

- **`Сценарий: 09.`** Проверка vat_code - 6(20%/120%)
По навигационой ссылке открывается созданная ставка НДС и в ней выставляется ставка в 20% и включается тумблер Расчетная > Создается продажа > Проверяется json по шаблону.

- **`Сценарий: 07.`** Возврат настроек.
Убирает из организации ставку НДС по Юкассе на ставку НДС - Без НДС.

## Описание работы автотеста Юкассы - Проверка СНО

- **`Сценарий: 00.`** Первоначальная настройка.
Удаляем из организации уже имеющиеся настройки по системе налогооблажения > Добавляем свои по сценарию.

- **`Сценарий: 01.`** Проверка tax_system_code - 1(Общая)
Устанавливается в организации система налогообложения - Общая > Создается клиент, номенклатура и продажа с созданием ссылки на оплату > Проверяется json по шаблону.

- **`Сценарий: 02.`** Проверка tax_system_code - 2(Упрощенная доход)
В организации устанавливается СНО - Упрощенная доход > Создается продажа с ссылкой на оплату > Проверяется json по шаблону.

- **`Сценарий: 03.`** Проверка tax_system_code - 3(Упрощенная доход минус расход)
В организации устанавливается СНО - Упрощенная доход минус расход > Создается продажа с ссылкой на оплату > Проверяется json по шаблону.

- **`Сценарий: 04.`** Проверка tax_system_code - 4(Единый налог на вмененный доход)
В организации устанавливается СНО - Единый налог на вмененный доход > Создается продажа с ссылкой на оплату > Проверяется json по шаблону.

- **`Сценарий: 05.`** Проверка tax_system_code - 5(Единый сельскохозяйственный налог)
В организации устанавливается СНО - Единый сельскохозяйственный налог > Создается продажа с ссылкой на оплату > Проверяется json по шаблону.

- **`Сценарий: 06.`** Проверка tax_system_code - 6(Патентная система налогообложения)
В организации устанавливается СНО - Патентная система налогообложения > Создается продажа с ссылкой на оплату > Проверяется json по шаблону.

- **`Сценарий: 07.`** Возврат настроек.
В организации возврает СНО на - Общая