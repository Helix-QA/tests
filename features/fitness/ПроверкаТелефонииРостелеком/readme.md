# Проверка и создание Проверка телефонии Ростелеком   

Для автотестирования созданы следующие фича-файлы:

- **`ПроверкаТелефонииРостелеком   `**
- **`Export_ПроверкаТелефонииРостелеком   `**

#### Описание автотеста проверки Отчёты

## Загрузка данных

---

### **1️⃣ Общий контекст**

* Сценарии начинаются с подготовки:

  * Запуск или подключение к уже открытой клиентской программе (`TestClient`).
  * Закрытие всех открытых окон приложения.
  * Очистка всех переменных.
  * Создание тестового клиента.

---

### **2️⃣ Сценарий «Проверка звонка от клиента»**

1. **Открытие обработки звонка**

   * Загружается внешняя обработка `ЗвонкПациента.epf`.
   * Генерируется случайный номер пациента, который сохраняется в переменную `$$ТелефонКлиента$$`.
   * Симулируется звонок от нового пациента.

2. **Проверка окна входящего звонка**

   * Проверяются все элементы интерфейса: картинки, надписи, разделители, поля для заметок и поиска, телефонные поля.
   * Закрывается окно звонка и нажимается стандартная кнопка (вероятно, подтверждение или «ОК»).

3. **Проверка истории вызовов**

   * Переход в справочник «История вызовов».
   * Поиск строки с текущим звонком по шаблону (телефон, IP-оборудование, дата, время, статус и т.д.).
   * Выбирается соответствующая строка для дальнейших действий.

4. **Запись информации по звонку**

   * В поле «Заметки» вводится текст с деталями разговора.
   * Проверяются кнопки «Создать заявку» и «Создать потенциального клиента».
   * Проверяется возможность позвонить по IP-телефонии (ожидается ошибка соединения — эмуляция недоступности сети).
   * Добавление номера телефона к клиенту.
   * Завершение звонка и проверка, что данные корректно сохранены в истории.
   * Проверка открытия клиента, основного менеджера и полей информации.

5. **Повторные звонки**

   * Проверка кнопки «Перезвонить клиенту» также ожидает ошибки подключения.

---

### **3️⃣ Сценарий «Пропущенный звонок и черный список»**

1. **Открытие обработки и генерация случайного номера**

   * Симулируется пропущенный звонок (`Пропущенный`) и завершение звонка.
   * Создается точное время и дата для пропущенного звонка.

2. **Проверка в истории вызовов**

   * Переход в историю вызовов и проверка, что звонок зафиксирован как «Пропущен».

3. **Проверка интерфейса звонка**

   * Проверяются все элементы окна звонка (аналогично первому сценарию).

4. **Внесение в черный список**

   * Номер клиента добавляется в черный список с пометкой «Спам».

5. **Создание заявки по пропущенному звонку**

   * Создается тестовая заявка с случайными ФИО.
   * Проверка, что заявка появилась в справочнике и статус корректный.
   * Проверка кнопки «Позвонить» в заявке (опять эмуляция ошибки сети).

---