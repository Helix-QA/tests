# Проверка и создание Проверка телефонии Ростелеком   

Для автотестирования созданы следующие фича-файлы:

- **`ПроверкаТелефонииРостелеком   `**
- **`Export_ПроверкаТелефонииРостелеком   `**

#### Описание автотеста проверки Отчёты

## Загрузка данных

---

## **1️⃣ Общий контекст**

* Запуск или подключение к `TestClient`.
* Закрытие всех окон приложения.
* Очистка всех переменных.
* Создание **врача** и **пациента** (или мастера/клиента) для дальнейших действий.

---

## **2️⃣ Сценарий «Проверка статуса звонка от клиента»**

### **Основные шаги**

1. **Открытие обработки `ЗвонкПациента.epf`**

   * Генерация случайного номера клиента (`$$ТелефонКлиента$$`).
   * Симуляция звонка от нового пациента.
   * Создание точного времени звонка.

2. **Проверка страницы со звонком**

   * Проверяются элементы интерфейса:

     * Картинка звонка и декоративные элементы.
     * Дата и время звонка.
     * Статус приёма (`Прием подтвержден`).
     * Метки визита и страхового полиса.
     * Поля с телефоном клиента (найден/не найден).
   * Закрытие окна звонка.

3. **Проверка истории вызовов**

   * Переход в справочник «История звонков».
   * Проверка строки с данными звонка: дата, тип, время, телефоны, сотрудник, статус («Разговор»).

4. **Заполнение информации по звонку**

   * Ввод текста в поле «Заметки».
   * Генерация случайных данных для ФИО клиента (`$$Фамилия$$`, `$$Имя$$`, `$$Отчество$$`).

5. **Запись клиента**

   * Создание записи на приём (`СоздатьИЗаписатьПациента`).
   * Запись в лист ожидания с указанием сотрудника, даты окончания (конец месяца) и установки флага расписания.

6. **Перезвон, ошибки и черный список**

   * Перезвон клиенту с эмуляцией ошибки сети.
   * Действия при невозможности записи на приём (нет свободных слотов).
   * Добавление звонка в черный список и проверка корректности записи.

7. **Завершение звонка**

   * Завершение звонка через обработку `ЗвонкПациента.epf`.
   * Проверка статуса звонка в истории как «Звонок не связан с приемом».
   * Проверка действий с клиентом и повторного звонка через IP-телефонию.

8. **Проверка заявок и сделок**

   * Переход в справочник «Сделки».
   * Проверка создания заявки по входящему звонку.
   * Проверка кнопки «Позвонить» в заявке (ошибка сети эмулирована).

---

## **3️⃣ Сценарий «Проверка пропущенного звонка»**

* Генерация случайного номера (`$$ТелефонКлиента2$$`).
* Симуляция пропущенного звонка и его завершение.
* Проверка истории звонков с типом «Входящий» и статусом «Пропущен».
* Проверка всех элементов интерфейса звонка:

  * Декоративные элементы и метки.
  * Поля с телефоном.
* Эмулируются действия по обработке пропущенного звонка: создание точных данных и обновление истории вызовов.

---

## **4️⃣ Ключевые элементы и новые функции**

1. Использование **врачей и пациентов** для имитации реального потока звонков.
2. Проверка работы с:

   * Черным списком.
   * Ошибками IP-телефонии.
   * Записью на приём и листом ожидания.
3. Подробная проверка интерфейсных элементов:

   * Метки, декоративные поля, ФИО, статус приёма, телефоны.
4. Расширенная работа с **историей вызовов**, заявками и сделками.

---

