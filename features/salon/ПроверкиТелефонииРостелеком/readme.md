# Проверка и создание Проверка телефонии Ростелеком   

Для автотестирования созданы следующие фича-файлы:

- **`ПроверкаТелефонииРостелеком   `**
- **`Export_ПроверкаТелефонииРостелеком   `**

#### Описание автотеста проверки Отчёты

## Загрузка данных

---

## **1️⃣ Общий контекст и подготовка**

* Запуск или подключение к уже открытому `TestClient`.
* Закрытие всех окон приложения.
* Очистка всех переменных.
* Создание **Мастера** и **клиента**, чтобы далее можно было записывать звонки и взаимодействовать с конкретными пользователями.

---

## **2️⃣ Сценарий «Проверка звонка от клиента»**

### **Шаги:**

1. **Открытие обработки `ЗвонкПациента.epf`**

   * Генерируется случайный номер пациента и сохраняется в `$$ТелефонКлиента$$`.
   * Симулируется звонок от нового клиента.
   * Создаётся точное время и дата звонка.

2. **Проверка страницы со звонком**

   * Проверяются все элементы интерфейса: картинки, надписи, разделители, поля «Заметки» и «ПоискКонтрагента».
   * Проверка, что телефон в полях найден и не найден совпадает с ожидаемым номером.
   * Закрытие окна звонка и подтверждение действия (`Button0`).

3. **Проверка истории вызовов**

   * Переход в справочник «История вызовов».
   * Поиск строки по шаблону с данными звонка: кто звонил, кому, дата, время, статус («Разговор»).
   * Выбор строки для дальнейших действий.

4. **Заполнение информации по звонку**

   * В поле «Заметки» вводится текст с деталями разговора.
   * Проверка кнопок:

     * **«Добавить контакт»** — добавление клиента в систему.
     * **«Позвонить»** — эмуляция звонка с ожидаемой ошибкой сети.
     * **«Записать на визит»** — закомментировано, т.е. не выполняется.
     * **«Записать в лист ожидания»** — выбор Мастера, установка даты окончания через конец месяца, установка флага расписания.

5. **Дополнительные звонки**

   * Кнопка «Перезвонить клиенту» также проверяет корректность обработки звонка (с эмуляцией ошибки сети).
   * Закрытие окна звонка.

---

## **3️⃣ Сценарий «Пропущенный звонок»**

### **Шаги:**

1. **Открытие обработки**

   * Генерация случайного номера пациента `$$ТелефонКлиента2$$`.
   * Симуляция пропущенного звонка.
   * Завершение звонка.
   * Сохраняется время звонка в переменные `$$ТекЧасМин1$$` и `$$ТекВремя1$$`.

2. **Проверка истории вызовов**

   * Переход в историю звонков.
   * Поиск строки с пропущенным звонком по шаблону: дата, время, «Вид вх. звонка» = «Новый клиент», статус = «Пропущен».
   * Выбор строки для дальнейшей проверки.

3. **Проверка страницы пропущенного звонка**

   * Проверяются элементы интерфейса, аналогично входящему звонку.
   * Проверяется, что поля «ПолеНомерТелефонаНайден» и «НеНайден» содержат правильный номер.
   * Проверяются декоративные элементы и пустые строки-заглушки.

---
